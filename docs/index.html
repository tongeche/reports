<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AutoTrust Overview</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.plot.ly/plotly-2.30.0.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            display: ['Space Grotesk', 'Inter', 'sans-serif'],
            body: ['Space Grotesk', 'Inter', 'sans-serif'],
          },
          colors: {
            night: '#0b1221',
            ink: '#0f172a',
            neon: '#8be9b4',
            aqua: '#39c0e0',
            coral: '#f4738f',
          },
          boxShadow: {
            panel: '0 20px 60px rgba(0,0,0,0.35)',
          }
        }
      }
    }
  </script>
  <style>
    body { background: radial-gradient(circle at 20% 20%, rgba(57,192,224,0.12), transparent 25%), radial-gradient(circle at 80% 10%, rgba(244,115,143,0.12), transparent 28%), #0b1221; }
    .glass { background: linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.07); }
    iframe { width: 100%; height: 100%; border: 0; border-radius: 14px; background: #0f172a; }
    .lang-active { background-color: rgba(255,255,255,0.2); color: #fff; }
  </style>
</head>
<body class="font-body text-slate-100">
  <div class="min-h-screen px-4 sm:px-8 pb-12">
    <div class="max-w-6xl mx-auto pt-6">
      <div class="glass shadow-panel rounded-2xl px-4 py-3 flex flex-wrap items-center gap-3 text-sm text-slate-200">
        <span class="text-xs uppercase tracking-[0.2em] text-slate-400">AutoTrust</span>
        <div class="flex flex-wrap gap-2">
          <a class="px-3 py-1 rounded-full bg-white/10 hover:bg-white/20 transition" href="dashboard.html?tab=sales">Vendas</a>
          <a class="px-3 py-1 rounded-full bg-white/10 hover:bg-white/20 transition" href="dashboard.html?tab=competitors">Competition</a>
          <a class="px-3 py-1 rounded-full bg-white/10 hover:bg-white/20 transition" href="dashboard.html?tab=ads">Ads</a>
          <a class="px-3 py-1 rounded-full bg-white/10 hover:bg-white/20 transition" href="dashboard.html?tab=customers">leads</a>
        </div>
      </div>
    </div>
    <header class="max-w-6xl mx-auto pt-10 pb-6 flex flex-col gap-6">
      <div class="flex items-center gap-3">
        <span class="px-3 py-1 text-xs uppercase tracking-[0.2em] bg-white/10 rounded-full" data-i18n="hero_badge">AutoTrust Insights</span>
        <span class="text-xs text-slate-400" data-i18n="hero_kicker">Visão geral</span>
        <div class="ml-auto flex gap-2">
          <button data-set-lang="pt" class="px-3 py-1 rounded-full bg-white/10 hover:bg-white/20 text-xs">PT</button>
          <button data-set-lang="en" class="px-3 py-1 rounded-full bg-white/10 hover:bg-white/20 text-xs">EN</button>
        </div>
      </div>
      <div class="flex flex-col gap-3"></div>
      <div class="flex flex-wrap gap-3">
        <a class="px-4 py-2 rounded-full bg-neon text-ink font-semibold hover:opacity-90 transition" href="dashboard.html" data-i18n="hero_primary_cta">Abrir dashboard completo</a>
        <a class="px-4 py-2 rounded-full bg-white/10 hover:bg-white/20 transition" href="comparative_report.md" data-i18n="hero_secondary_cta">Abrir relatório comparativo</a>
      </div>
    </header>
    <section class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-4">
      <div class="glass shadow-panel rounded-2xl p-5 flex flex-col gap-3">
        <p class="text-sm text-slate-300" data-i18n="index_sales_title">Resumo anual de vendas</p>
        <div class="h-[240px]" id="index-sales-yearly-chart"></div>
      </div>
      <div class="glass shadow-panel rounded-2xl p-5 flex flex-col gap-3">
        <p class="text-sm text-slate-300" data-i18n="index_competitors_title">Insight recente de concorrentes</p>
        <div class="h-[240px]" id="index-competitor-chart"></div>
      </div>
      <div class="glass shadow-panel rounded-2xl p-5 flex flex-col gap-3">
        <p class="text-sm text-slate-300" data-i18n="index_origin_title">Distribuição de origem</p>
        <div class="h-[240px]" id="index-origin-chart"></div>
      </div>
    </section>
  </div>
  <script>
    const indexSalesYearlyData = {
      "years": [],
      "sales": []
    };
    const indexCompetitorCategoryData = {
      "categories": [],
      "counts": []
    };
    const indexOriginDistributionData = {
      "origins": [],
      "counts": []
    };
    let currentLang = "pt";

    function getIndexLabel(key) {
      const dict = translations[currentLang] || translations.pt;
      return dict[key] || "";
    }

    function renderIndexSalesYearlyChart() {
      const chartEl = document.getElementById("index-sales-yearly-chart");
      if (!chartEl || !window.Plotly || !indexSalesYearlyData.years.length) return;

      const trace = {
        x: indexSalesYearlyData.years,
        y: indexSalesYearlyData.sales,
        type: "bar",
        marker: { color: "rgba(139,233,180,0.7)" },
        hovertemplate: "%{x}<br>%{y}<extra></extra>"
      };

      const layout = {
        margin: { l: 50, r: 20, t: 10, b: 40 },
        paper_bgcolor: "rgba(0,0,0,0)",
        plot_bgcolor: "rgba(0,0,0,0)",
        xaxis: {
          tickfont: { color: "#cbd5f5" },
          gridcolor: "rgba(148,163,184,0.15)"
        },
        yaxis: {
          title: getIndexLabel("index_sales_axis"),
          titlefont: { color: "#8be9b4" },
          tickfont: { color: "#cbd5f5" },
          gridcolor: "rgba(148,163,184,0.15)"
        }
      };

      Plotly.react(chartEl, [trace], layout, {
        displayModeBar: false,
        responsive: true
      });
    }

    function renderIndexCompetitorChart() {
      const chartEl = document.getElementById("index-competitor-chart");
      if (!chartEl || !window.Plotly || !indexCompetitorCategoryData.categories.length) return;

      const trace = {
        labels: indexCompetitorCategoryData.categories,
        values: indexCompetitorCategoryData.counts,
        type: "pie",
        hole: 0.5,
        sort: false,
        marker: { colors: ["#f4738f", "#39c0e0", "#8be9b4", "#facc15"] },
        textinfo: "percent",
        hovertemplate: "%{label}<br>%{value}<extra></extra>"
      };

      const layout = {
        margin: { l: 10, r: 10, t: 10, b: 10 },
        paper_bgcolor: "rgba(0,0,0,0)",
        plot_bgcolor: "rgba(0,0,0,0)",
        font: { color: "#e2e8f0" },
        legend: { orientation: "h", y: -0.1, x: 0 }
      };

      Plotly.react(chartEl, [trace], layout, {
        displayModeBar: false,
        responsive: true
      });
    }

    function renderIndexOriginChart() {
      const chartEl = document.getElementById("index-origin-chart");
      if (!chartEl || !window.Plotly || !indexOriginDistributionData.origins.length) return;

      const trace = {
        labels: indexOriginDistributionData.origins,
        values: indexOriginDistributionData.counts,
        type: "pie",
        hole: 0.5,
        sort: false,
        marker: { colors: ["#39c0e0", "#8be9b4", "#f59e0b", "#a855f7", "#94a3b8"] },
        textinfo: "percent",
        hovertemplate: "%{label}<br>%{value}<extra></extra>"
      };

      const layout = {
        margin: { l: 10, r: 10, t: 10, b: 10 },
        paper_bgcolor: "rgba(0,0,0,0)",
        plot_bgcolor: "rgba(0,0,0,0)",
        font: { color: "#e2e8f0" },
        legend: { orientation: "h", y: -0.1, x: 0 }
      };

      Plotly.react(chartEl, [trace], layout, {
        displayModeBar: false,
        responsive: true
      });
    }

    function renderIndexCharts() {
      renderIndexSalesYearlyChart();
      renderIndexCompetitorChart();
      renderIndexOriginChart();
    }
    const translations = {
      pt: {
        hero_badge: "AutoTrust Insights",
        hero_kicker: "Visão geral",
        hero_primary_cta: "Abrir dashboard completo",
        hero_secondary_cta: "Abrir relatório comparativo",
        index_sales_title: "Resumo anual de vendas",
        index_competitors_title: "Insight recente de concorrentes",
        index_origin_title: "Distribuição de origem",
        index_sales_axis: "Total de carros vendidos"
      },
      en: {
        hero_badge: "AutoTrust Insights",
        hero_kicker: "Overview",
        hero_primary_cta: "Open full dashboard",
        hero_secondary_cta: "Open comparative report",
        index_sales_title: "Annual sales summary",
        index_competitors_title: "Recent competitor insight",
        index_origin_title: "Origin distribution",
        index_sales_axis: "Total cars sold"
      }
    };

    const langButtons = document.querySelectorAll("[data-set-lang]");
    function applyLang(lang) {
      currentLang = lang;
      const dict = translations[lang] || translations.pt;
      document.documentElement.lang = lang === "en" ? "en" : "pt-BR";
      document.querySelectorAll("[data-i18n]").forEach((el) => {
        const key = el.dataset.i18n;
        if (dict[key]) el.textContent = dict[key];
      });
      langButtons.forEach((btn) => {
        btn.classList.toggle("lang-active", btn.dataset.setLang === lang);
      });
      renderIndexCharts();
    }
    langButtons.forEach((btn) =>
      btn.addEventListener("click", () => applyLang(btn.dataset.setLang))
    );
    applyLang("pt");
  </script>
</body>
</html>
